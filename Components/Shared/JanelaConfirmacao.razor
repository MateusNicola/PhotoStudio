@if (Visivel)
{
    <div class="modal-overlay">
        <div class="modal-box">
            <h3>@Title</h3>
            <p>@Message</p>

            <div class="modal-actions">
                <button class="btn btn-secondary" @onclick="Cancelar">
                    Cancelar
                </button>

                <button class="btn btn-danger" @onclick="Confirmar">
                    Confirmar
                </button>
            </div>
        </div>
    </div>
}

<style>
    .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
    }

    .modal-box {
        background: white;
        padding: 24px;
        border-radius: 12px;
        width: 420px;
        box-shadow: 0 10px 25px rgba(0,0,0,.2);
    }

    .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        margin-top: 20px;
    }

</style>
@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Message { get; set; } = "";

    private bool Visivel { get; set; }

    private TaskCompletionSource<bool>? _tcs;

    public Task<bool> Show()
    {
        _tcs = new TaskCompletionSource<bool>();
        Visivel = true;

        InvokeAsync(StateHasChanged);

        return _tcs.Task;
    }

    private void Confirmar()
    {
        Visivel = false;
        _tcs?.SetResult(true);
    }

    private void Cancelar()
    {
        Visivel = false;
        _tcs?.SetResult(false);
    }
}
