@using Microsoft.AspNetCore.Components.Authorization

<div class="sidebar-wrapper">
    <div class="top-row navbar navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand brand-modern" href="">
                <span class="brand-logo">📸</span>
                <span class="brand-text">PhotoStudio</span>
            </a>
        </div>
    </div>

    <input type="checkbox" title="Navigation menu" class="navbar-toggler" />

    <div class="nav-scrollable custom-sidebar" onclick="document.querySelector('.navbar-toggler').click()">
        <nav class="flex-column nav-flex-container">
            @* Grupo Principal *@
            <div class="nav-group top-group">
                <div class="nav-item">
                    <NavLink class="nav-link-modern" href="" Match="NavLinkMatch.All">
                        <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Dashboard</span>
                    </NavLink>
                </div>

                <div class="nav-item">
                    <NavLink class="nav-link-modern" href="clientes">
                        <span class="bi bi-person-circle-fill-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Clientes</span>
                    </NavLink>
                </div>

                <div class="nav-item">
                    <NavLink class="nav-link-modern" href="ensaios">
                        <span class="bi bi-camera-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Ensaios</span>
                    </NavLink>
                </div>

                <div class="nav-item">
                    <NavLink class="nav-link-modern" href="categorias">
                        <span class="bi bi-collection-fill-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Categorias</span>
                    </NavLink>
                </div>
            </div>

            @* Grupo de Administração *@
            <div class="nav-group admin-group">
                <div class="nav-label">Configurações</div>

                <div class="nav-item">
                    <NavLink class="nav-link-modern" href="alterar-senha">
                        <span class="bi bi-key-fill-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Segurança</span>
                    </NavLink>
                </div>

                <AuthorizeView Roles="admin">
                    <Authorized>
                        <div class="nav-item">
                            <NavLink class="nav-link-modern" href="usuarios">
                                <span class="bi bi-person-circle-fill-nav-menu" aria-hidden="true"></span>
                                <span class="nav-text">Equipe</span>
                            </NavLink>
                        </div>
                    </Authorized>
                </AuthorizeView>
            </div>

            @* Rodapé/Logout *@
            <div class="nav-footer">
                <div class="nav-item">
                    <a class="nav-link-modern logout-btn" href="api/auth/logout">
                        <span class="bi bi-box-arrow-right-nav-menu" aria-hidden="true"></span>
                        <span class="nav-text">Sair do Sistema</span>
                    </a>
                </div>
            </div>
        </nav>
    </div>
</div>

<style>
    /* 1. ESTRUTURA E FUNDO UNIFICADO */
    .sidebar-wrapper {
        background: #111111;
        background-image: linear-gradient(180deg, #16181d 0%, #0d0e12 100%);
        box-shadow: 4px 0 25px rgba(0,0,0,0.5);
        height: 100%;
        display: flex;
        flex-direction: column;
    }

    /* 2. TOPO (BRANDING) - Transparente para não criar faixas */
    .top-row {
        height: 4.5rem;
        background-color: transparent !important;
        display: flex;
        align-items: center;
        border: none;
    }

    .brand-modern {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 0 1.5rem !important;
        text-decoration: none;
        transition: transform 0.3s ease;
    }

        .brand-modern:hover {
            transform: scale(1.02);
        }

    .brand-logo {
        font-size: 1.6rem;
        filter: drop-shadow(0 0 8px rgba(102, 126, 234, 0.4));
    }

    .brand-text {
        font-size: 1.25rem;
        font-weight: 800;
        color: white;
        letter-spacing: -0.5px;
        background: linear-gradient(to right, #ffffff, #a0aec0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* 3. NAVEGAÇÃO E SCROLL */
    .nav-scrollable {
        flex: 1;
        overflow-y: auto;
    }

    .nav-flex-container {
        display: flex;
        flex-direction: column;
        height: 100%;
        padding: 10px;
    }

    .nav-group {
        flex: 1;
    }

    .nav-label {
        font-size: 0.65rem;
        text-transform: uppercase;
        color: #4a5568;
        font-weight: 800;
        margin: 25px 0 10px 18px;
        letter-spacing: 1.5px;
    }

    /* 4. LINKS E BOTÕES */
    .nav-link-modern {
        display: flex;
        align-items: center;
        padding: 12px 18px;
        margin: 4px 10px;
        border-radius: 14px;
        color: #94a3b8;
        text-decoration: none;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 500;
        cursor: pointer;
    }

        .nav-link-modern:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            transform: translateX(5px);
        }

        .nav-link-modern.active {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: #ffffff !important;
            box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.5);
        }

    .nav-text {
        margin-left: 10px;
    }

    /* 5. RODAPÉ E LOGOUT */
    .nav-footer {
        padding: 20px 10px;
        border-top: 1px solid rgba(255,255,255,0.05);
    }

    .logout-btn {
        border: 1px solid rgba(239, 68, 68, 0.2);
        color: #f87171 !important;
        background: rgba(239, 68, 68, 0.02);
    }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.1) !important;
            color: #ef4444 !important;
            border-color: #ef4444;
        }

    /* 6. DEFINIÇÃO DOS ÍCONES (SVG DATA URIs) */
    .bi {
        display: inline-block;
        width: 1.25rem;
        height: 1.25rem;
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center;
    }

    /* Filtro para ícones ficarem brancos no modo ativo */
    .nav-link-modern.active .bi {
        filter: brightness(0) invert(1);
    }

    .bi-house-door-fill-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z'/%3E%3C/svg%3E");
    }

    .bi-person-circle-fill-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z'/%3E%3Cpath fill-rule='evenodd' d='M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z'/%3E%3C/svg%3E");
    }

    .bi-camera-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4z'/%3E%3Cpath d='M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0'/%3E%3C/svg%3E");
    }

    .bi-collection-fill-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M0 13a1.5 1.5 0 0 0 1.5 1.5h13A1.5 1.5 0 0 0 16 13V6a1.5 1.5 0 0 0-1.5-1.5h-13A1.5 1.5 0 0 0 0 6v7zM2 3a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11A.5.5 0 0 0 2 3zm2-2a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7A.5.5 0 0 0 4 1z'/%3E%3C/svg%3E");
    }

    .bi-key-fill-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath d='M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z'/%3E%3C/svg%3E");
    }

    .bi-box-arrow-right-nav-menu {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z'/%3E%3Cpath fill-rule='evenodd' d='M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z'/%3E%3C/svg%3E");
    }

    /* 7. RESPONSIVIDADE (MOBILE) */
    .navbar-toggler {
        background-color: rgba(255, 255, 255, 0.1);
        border: none;
        top: 1rem;
        right: 1rem;
    }

    @@media (min-width: 641px) {
        .nav-scrollable

    {
        display: block;
    }

    }
</style>